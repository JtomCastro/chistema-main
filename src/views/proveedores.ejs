<!DOCTYPE html>
<html lang="es">
  <head>
    <meta charset="UTF-8" />
    <title>Listado de Proveedores</title>
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <style>
      body {
        background-color: #f8f9fa;
      }

      h1 {
        font-weight: 700;
      }

      /* Badges */
      .badge.bg-success,
      .badge.bg-danger,
      .badge.bg-secondary {
        font-weight: 600;
        font-size: 0.9rem;
        padding: 0.35em 0.7em;
        border-radius: 0.375rem;
      }

      /* Botones en acciones con margen */
      td.text-center a.btn {
        margin: 0 0.15rem 0.15rem 0;
      }

      /* Tabla con sombra y bordes redondeados */
      table.table {
        border-radius: 0.5rem;
        overflow: hidden;
        box-shadow: 0 0.125rem 0.25rem rgb(0 0 0 / 0.075);
      }

      thead.table-dark th {
        vertical-align: middle;
        font-size: 0.95rem;
        letter-spacing: 0.03em;
      }

      /* Mejor altura para filas */
      tbody tr {
        height: 52px;
      }

      /* Input grupo estilo */
      .input-group input.form-control {
        height: 38px;
        font-size: 1rem;
        border-radius: 0.375rem 0 0 0.375rem;
        border-right: none;
      }
      .input-group button.btn {
        border-radius: 0 0.375rem 0.375rem 0;
        font-weight: 600;
      }

      /* Responsive para el header botones */
      .d-flex > div a {
        min-width: 130px;
        margin-left: 0.5rem;
      }
      @media (max-width: 575.98px) {
        .d-flex > div a {
          margin-left: 0;
          min-width: 100%;
          margin-top: 0.5rem;
        }
      }
    </style>
  </head>
  <body>
    <div class="container mt-5">
      <div
        class="d-flex justify-content-between align-items-center flex-wrap gap-2 mb-4"
      >
        <h1 class="text-primary mb-0">üìã Listado de Proveedores</h1>
        <div>
          <a href="/deshboard" class="btn btn-outline-primary me-2">
            üè† Volver al Dashboard
          </a>
          <a href="/proveedores/registrar" class="btn btn-success">
            ‚ûï Registrar Proveedor
          </a>
        </div>
      </div>

      <!-- Barra de b√∫squeda -->
      <form action="/proveedores" method="get" class="mb-3">
        <div class="input-group">
          <input
            type="text"
            name="buscar"
            class="form-control"
            placeholder="Buscar proveedor por RUC o Raz√≥n Social"
            aria-label="Buscar proveedor"
            value="<%= typeof buscar !== 'undefined' ? buscar : '' %>"
          />
          <button class="btn btn-primary" type="submit">üîç Buscar</button>
        </div>
      </form>

      <div class="table-responsive">
        <table
          class="table table-bordered table-hover bg-white align-middle text-nowrap"
        >
          <thead class="table-dark text-center">
            <tr>
              <th>RUC</th>
              <th>Raz√≥n Social</th>
              <th>Contacto</th>
              <th>Tel√©fono</th>
              <th>Correo Electr√≥nico</th>
              <th>Direcci√≥n</th>
              <th>Tipo de Productos</th>
              <th>Estado</th>
              <th>üõí Stock Cr√≠tico</th>
              <th>Fecha Registro</th>
              <th>Acciones</th>
            </tr>
          </thead>
          <tbody>
            <% proveedores.forEach(prov => { %>
            <tr>
              <td><%= prov.ruc %></td>
              <td><%= prov.razon_social %></td>
              <td><%= prov.contacto %></td>
              <td><%= prov.telefono %></td>
              <td><%= prov.correo_electronico %></td>
              <td><%= prov.direccion %></td>
              <td><%= prov.tipo_productos %></td>
              <td class="text-center">
                <span
                  class="badge bg-<%= prov.estado === 'activo' ? 'success' : 'secondary' %>"
                >
                  <%= prov.estado %>
                </span>
              </td>
              <td class="text-center">
                <% if (prov.productos_bajo_stock > 0) { %>
                <span class="badge bg-danger">
                  <%= prov.productos_bajo_stock %> ‚ö†Ô∏è
                </span>
                <% } else { %>
                <span class="badge bg-success">‚úî Sin alertas</span>
                <% } %>
              </td>
              <td><%= new Date(prov.fecha_registro).toLocaleDateString() %></td>
              <td class="text-center">
                <a
                  href="/proveedores/editar/<%= prov.id %>"
                  class="btn btn-sm btn-warning"
                  title="Editar proveedor"
                  >‚úèÔ∏è</a
                >
                <a
                  href="/proveedores/eliminar/<%= prov.id %>"
                  class="btn btn-sm btn-danger"
                  onclick="return confirm('¬øDeseas eliminar este proveedor?')"
                  title="Eliminar proveedor"
                  >üóëÔ∏è</a
                >
              </td>
            </tr>
            <% }) %>
          </tbody>
        </table>
      </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
  </body>
</html>
