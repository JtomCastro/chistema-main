<!DOCTYPE html>
<html lang="es">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Panel de Control - Sistema de Ventas</title>
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css"
    />
    <style>
      body {
        background-color: #f8f9fa;
        margin: 0;
        padding: 0;
      }

      /* Sidebar fijo en desktop */
      @media (min-width: 992px) {
        body {
          padding-left: 250px; /* espacio para sidebar */
        }

        #sidebarDesktop {
          position: fixed;
          top: 0;
          left: 0;
          height: 100vh;
          width: 250px;
          padding-top: 1rem;
          background-color: #343a40;
          color: white;
          overflow-y: auto;
        }

        #sidebarDesktop .nav-link {
          color: white;
        }

        #sidebarDesktop .nav-link:hover,
        #sidebarDesktop .nav-link.active {
          background-color: #495057;
          color: white;
        }

        #mainContent {
          margin-left: 0; /* El padding-left del body ya da espacio */
          padding: 2rem;
        }
      }

      /* Logout y botones */
      .logout-container {
        margin-top: auto;
        padding-top: 1rem;
        border-top: 1px solid #6c757d;
      }

      .logout-btn {
        width: 100%;
        background-color: #dc3545;
        color: white;
        border: none;
        padding: 0.6rem;
        border-radius: 0.3rem;
        display: flex;
        justify-content: center;
        align-items: center;
        transition: background-color 0.3s ease;
        text-decoration: none;
      }

      .logout-btn:hover {
        background-color: #c82333;
        color: white;
      }
    </style>
  </head>
  <body>
    <!-- Navbar móvil con botón hamburguesa -->
    <nav class="navbar navbar-dark bg-dark d-lg-none">
      <div class="container-fluid">
        <button
          class="btn btn-dark"
          type="button"
          data-bs-toggle="offcanvas"
          data-bs-target="#offcanvasSidebar"
          aria-controls="offcanvasSidebar"
          aria-label="Abrir menú"
        >
          <span class="navbar-toggler-icon"></span>
        </button>
        <a class="navbar-brand ms-2" href="#">🛒 VentasAlex</a>
      </div>
    </nav>

    <!-- Sidebar fijo para desktop -->
    <nav
      id="sidebarDesktop"
      class="d-none d-lg-flex flex-column p-3"
      aria-label="Sidebar desktop"
    >
      <h4 class="text-center mb-4">🛒 VentasAlex</h4>

      <ul class="nav nav-pills flex-column mb-auto">
        <li class="nav-item">
          <a href="/productos" class="nav-link text-white">
            <i class="bi bi-box-seam me-2"></i> Productos
          </a>
        </li>
        <li>
          <a href="/ventas" class="nav-link text-white">
            <i class="bi bi-receipt me-2"></i> Ventas
          </a>
        </li>
        <li>
          <a href="/clientes" class="nav-link text-white">
            <i class="bi bi-people me-2"></i> Clientes
          </a>
        </li>
        <li>
          <a href="/proveedores" class="nav-link text-white">
            <i class="bi bi-truck me-2"></i> Proveedores
          </a>
        </li>
        <li>
          <a href="/historial-ventas" class="nav-link text-white">
            <i class="bi bi-clock-history me-2"></i> Historial
          </a>
        </li>
        <li>
          <a href="/reportes" class="nav-link text-white">
            <i class="bi bi-graph-up me-2"></i> Reportes
          </a>
        </li>
        <li>
          <a href="/configuracion" class="nav-link text-white">
            <i class="bi bi-gear me-2"></i> Configuración
          </a>
        </li>
        <% if (rol === 'admin') { %>
        <li>
          <a href="/usuarios" class="nav-link text-white">
            <i class="bi bi-person-lines-fill me-2"></i> Usuarios
          </a>
        </li>
        <% } %>
      </ul>

      <div class="logout-container mt-auto">
        <% if (rol === 'admin') { %>
        <a
          href="/perfil"
          class="btn btn-warning w-100 text-dark fw-semibold mb-2 d-flex align-items-center justify-content-center"
        >
          <i class="bi bi-person-badge-fill me-1"></i> Administrador
        </a>
        <% } else if (rol === 'cajero') { %>
        <a
          href="/perfil"
          class="btn btn-primary w-100 fw-semibold mb-2 d-flex align-items-center justify-content-center"
        >
          <i class="bi bi-person-badge me-1"></i> Cajero
        </a>
        <% } %>
        <a
          href="/logout"
          class="logout-btn d-flex align-items-center justify-content-center"
        >
          <i class="bi bi-box-arrow-right me-2"></i> Cerrar sesión
        </a>
      </div>
    </nav>

    <!-- Offcanvas sidebar para móvil -->
    <div
      class="offcanvas offcanvas-start d-lg-none"
      tabindex="-1"
      id="offcanvasSidebar"
      aria-labelledby="offcanvasSidebarLabel"
    >
      <div class="offcanvas-header bg-dark text-white">
        <h5 class="offcanvas-title" id="offcanvasSidebarLabel">
          🛒 VentasAlex
        </h5>
        <button
          type="button"
          class="btn-close btn-close-white"
          data-bs-dismiss="offcanvas"
          aria-label="Cerrar"
        ></button>
      </div>
      <div
        class="offcanvas-body p-0 bg-dark text-white d-flex flex-column"
        style="height: 100vh"
      >
        <ul class="nav nav-pills flex-column mb-auto px-3">
          <li class="nav-item">
            <a href="/productos" class="nav-link text-white">
              <i class="bi bi-box-seam me-2"></i> Productos
            </a>
          </li>
          <li>
            <a href="/ventas" class="nav-link text-white">
              <i class="bi bi-receipt me-2"></i> Ventas
            </a>
          </li>
          <li>
            <a href="/clientes" class="nav-link text-white">
              <i class="bi bi-people me-2"></i> Clientes
            </a>
          </li>
          <li>
            <a href="/proveedores" class="nav-link text-white">
              <i class="bi bi-truck me-2"></i> Proveedores
            </a>
          </li>
          <li>
            <a href="/historial-ventas" class="nav-link text-white">
              <i class="bi bi-clock-history me-2"></i> Historial
            </a>
          </li>
          <li>
            <a href="/reportes" class="nav-link text-white">
              <i class="bi bi-graph-up me-2"></i> Reportes
            </a>
          </li>
          <li>
            <a href="/configuracion" class="nav-link text-white">
              <i class="bi bi-gear me-2"></i> Configuración
            </a>
          </li>
          <% if (rol === 'admin') { %>
          <li>
            <a href="/usuarios" class="nav-link text-white">
              <i class="bi bi-person-lines-fill me-2"></i> Usuarios
            </a>
          </li>
          <% } %>
        </ul>

        <div class="logout-container mt-auto px-3 pb-3">
          <% if (rol === 'admin') { %>
          <a
            href="/perfil"
            class="btn btn-warning w-100 text-dark fw-semibold mb-2 d-flex align-items-center justify-content-center"
          >
            <i class="bi bi-person-badge-fill me-1"></i> Administrador
          </a>
          <% } else if (rol === 'cajero') { %>
          <a
            href="/perfil"
            class="btn btn-primary w-100 fw-semibold mb-2 d-flex align-items-center justify-content-center"
          >
            <i class="bi bi-person-badge me-1"></i> Cajero
          </a>
          <% } %>
          <a
            href="/logout"
            class="logout-btn d-flex align-items-center justify-content-center"
          >
            <i class="bi bi-box-arrow-right me-2"></i> Cerrar sesión
          </a>
        </div>
      </div>
    </div>

    <!-- Main content -->
    <main id="mainContent" class="p-3">
      <nav
        class="navbar navbar-success mb-4 p-3 rounded shadow-sm bg-success text-white d-none d-lg-block"
      >
        <div class="container-fluid">
          <span class="navbar-brand mb-0 h5">📊 Panel de Administración</span>
        </div>
      </nav>

      <div class="container-fluid">
        <div class="row g-4">
          <!-- Productos -->
          <div class="col-12 col-md-6 col-lg-4">
            <div class="card border-success shadow-sm h-100">
              <div class="card-body">
                <h5 class="card-title">
                  <i class="bi bi-box-seam"></i> Productos
                </h5>
                <p class="card-text">Ver y gestionar productos disponibles.</p>
                <a href="/productos" class="btn btn-success">Administrar</a>
              </div>
            </div>
          </div>

          <!-- Ventas -->
          <div class="col-12 col-md-6 col-lg-4">
            <div class="card border-primary shadow-sm h-100">
              <div class="card-body">
                <h5 class="card-title">
                  <i class="bi bi-cash-register"></i> Ventas
                </h5>
                <p class="card-text">
                  Registrar y visualizar ventas realizadas.
                </p>
                <a href="/ventas" class="btn btn-primary">Ir a ventas</a>
              </div>
            </div>
          </div>

          <!-- Clientes -->
          <div class="col-12 col-md-6 col-lg-4">
            <div class="card border-warning shadow-sm h-100">
              <div class="card-body">
                <h5 class="card-title">
                  <i class="bi bi-person-lines-fill"></i> Clientes
                </h5>
                <p class="card-text">Administrar tus clientes fácilmente.</p>
                <a href="/clientes" class="btn btn-warning text-white"
                  >Ver clientes</a
                >
              </div>
            </div>
          </div>

          <!-- Proveedores -->
          <div class="col-12 col-md-6">
            <div class="card border-danger shadow-sm h-100">
              <div class="card-body">
                <h5 class="card-title">
                  <i class="bi bi-truck"></i> Proveedores
                </h5>
                <p class="card-text">Gestión de proveedores de productos.</p>
                <a href="/proveedores" class="btn btn-danger"
                  >Ver proveedores</a
                >
              </div>
            </div>
          </div>

          <!-- Reportes -->
          <div class="col-12 col-md-6">
            <div class="card border-info shadow-sm h-100">
              <div class="card-body">
                <h5 class="card-title">
                  <i class="bi bi-bar-chart"></i> Reportes
                </h5>
                <p class="card-text">
                  Visualiza estadísticas y reportes de ventas.
                </p>
                <a href="/reportes" class="btn btn-info">Ver reportes</a>
              </div>
            </div>
          </div>

          <!-- Configuración -->
          <div class="col-12 col-md-6">
            <div class="card border-secondary shadow-sm h-100">
              <div class="card-body">
                <h5 class="card-title">
                  <i class="bi bi-gear-fill"></i> Configuración
                </h5>
                <p class="card-text">Configura tu sistema de ventas y roles.</p>
                <a href="/configuracion" class="btn btn-secondary"
                  >Configurar</a
                >
              </div>
            </div>
          </div>

          <!-- Historial de Ventas -->
          <div class="col-12 col-md-6">
            <div class="card border-dark shadow-sm h-100">
              <div class="card-body">
                <h5 class="card-title">
                  <i class="bi bi-clock-history"></i> Historial de Ventas
                </h5>
                <p class="card-text">
                  Consulta todas las ventas realizadas por fecha, cliente o
                  producto.
                </p>
                <a href="/historial-ventas" class="btn btn-dark"
                  >Ver historial</a
                >
              </div>
            </div>
          </div>

          <!-- Historial de Inventario -->
          <div class="col-12">
            <div class="card border-warning shadow-sm h-100">
              <div class="card-body">
                <h5 class="card-title">
                  <i class="bi bi-journal-text"></i> Historial de Inventario
                </h5>
                <p class="card-text">
                  Consulta los movimientos de entrada, salida y ajustes de
                  stock.
                </p>
                <a
                  href="/inventario/historial"
                  class="btn btn-warning text-white"
                  >Ver movimientos</a
                >
              </div>
            </div>
          </div>
        </div>
      </div>
    </main>
    <script>
      Swal.fire({
        icon: "warning",
        title: "Acceso denegado",
        text: "<%= mensajeError %>",
        confirmButtonText: "Volver al panel",
        confirmButtonColor: "#3085d6",
      }).then(() => {
        window.location.href = "/deshboard";
      });
    </script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
  </body>
</html>
